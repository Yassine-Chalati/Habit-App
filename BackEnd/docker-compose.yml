# version: '3.2'
# services:
#   prometheus:
#     image: prom/prometheus:latest
#     container_name: prometheus
#     ports:
#     - 9090:9090
#     command:
#     - --config.file=/etc/prometheus/prometheus.yml
#     volumes:
#     - ./prometheus.yml:/etc/prometheus/prometheus.yml:ro
#     depends_on:
#     - cadvisor
#   cadvisor:
#     image: gcr.io/cadvisor/cadvisor:latest
#     container_name: cadvisor
#     ports:
#     - 8080:8080
#     volumes:
#     - /:/rootfs:ro
#     - /var/run:/var/run:rw
#     - /sys:/sys:ro
#     - /var/lib/docker/:/var/lib/docker:ro
#     depends_on:
#     - redis
#   redis:
#     image: redis:latest
#     container_name: redis
#     ports:
#     - 6379:6379

name: Habit-App-Backend

services:

  mysql:
    image: mysql:8.0 # You can use any MySQL version
    container_name: mysql
    environment:
      MYSQL_ROOT_PASSWORD: 1234  # Set root password
    ports:
      - "3307:3307"  # Expose MySQL on port 3306
    volumes:
      - mysql-data:/var/lib/mysql  # Persist MySQL data
    networks:
      - habit-app
  
  registry-service:
    build:
      context: ./registry-service
      dockerfile: Dockerfile
      args:
        - JAR_FILE=registry-service-0.0.1-SNAPSHOT.jar
    image: registry-service
    container_name: registry-service
    env_file:
      - ./environment/registry-information.env
    ports:
      - 8000:8000
    networks:
      - habit-app

volumes:
  mysql-data:

networks:
  habit-app:
    driver: bridge